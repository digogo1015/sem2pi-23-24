@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Agent" as ADM
participant ":CreateAdvertisementForPropertyUI" as UI
participant ":CreateAdvertisementForPropertyController" as CTRL
participant "manageAdvertisementRepository\n:ManageAdvertisementRepository" as manageAdvertisements

activate ADM

        ADM -> UI : asks to create property ad

        activate UI

'            UI --> ADM : Advertisements data (reference, description,  informal \n description, technical description, duration, cost)
            'create CTRL
            UI -> CTRL** : create

            UI -> CTRL : getAgents()
            activate CTRL

            ref over CTRL
                Get Agent List
                end ref

                CTRL --> UI : listOfAgents
            deactivate CTRL

            UI -> CTRL : getTypeOfProperties()
                        activate CTRL

                        ref over CTRL
                            Get Type of Property List
                            end ref

                            CTRL --> UI : TypeOfPropertiesList
                        deactivate CTRL

                        UI -> CTRL : getTypeOfCommission()
                                                activate CTRL

                                                ref over CTRL
                                                    Get Type of Commission List
                                                    end ref

                                                    CTRL --> UI : TypeOfCommissionList
                                                deactivate CTRL


                        UI -> CTRL : getTypeOfBusiness()
                                                activate CTRL

                                                ref over CTRL
                                                    Get Type of Business List
                                                    end ref

                                                    CTRL --> UI : TypeOfBusinessList
                                                deactivate CTRL



            UI --> ADM : shows list of agents and Advertisement's selected data (Type of Property,\n type of business, type of commission)  and asks to select the data
        deactivate UI

    ADM -> UI : selects data
    activate UI

        UI --> ADM : request data
    deactivate UI

    ADM -> UI : types requested data (price, area, distance to city center, address,\n photographs(linkURI), commission value)
    activate UI

    alt typeOfBusiness = Rent

    'UI --> ADM : Advertisements data
    '    deactivate UI
    '
    '    ADM -> UI : types Advertisemented data (rentPeriod)
    '            activate UI
    '
    'end

    alt typeOfProperty = House || Apartment

        UI --> ADM : request data
    deactivate UI

    ADM -> UI : types requested data (nBedrooms, nBathRooms, nParkingSpaces,\n EquipmentDesignation)
        activate UI

            alt typeOfProperty = House


            UI --> ADM : request data
        deactivate UI

        ADM -> UI : types requested data (SunExposure, Basement, Loft)
            activate UI

            end
            end

UI --> ADM : shows selected and typed data
            deactivate UI
    ADM -> UI : submits data
    activate UI

        UI -> CTRL : submitAdvertisement(price, area, distCityCenter, address,\n photographs(linkURI), commission value,\ nBedrooms, nBathRooms, nParkingSpaces,\n EquipmentDesignation, SunExposure, Basement, Loft,\n TypeofBusiness, TypeofProperty, TypeofCommission, agent)
        activate CTRL




                    CTRL -> manageAdvertisements : submitAdvertisement(price, area, distCityCenter, address,\n photographs(linkURI), commission value,\ nBedrooms, nBathRooms, nParkingSpaces,\n EquipmentDesignation, SunExposure, Basement, Loft,\n TypeofBusiness, TypeofProperty, TypeofCommission, agent)
                    activate manageAdvertisements

                    ref over manageAdvertisements
                    Register Advertisement
                    end ref


                                manageAdvertisements --> CTRL : Advertisement
                            deactivate manageAdvertisements

          CTRL -> UI: Advertisement
          deactivate CTRL
    UI -> ADM: show operation success
    deactivate UI

deactivate ADM

@enduml